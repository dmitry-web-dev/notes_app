{% extends "base.html" %}

{% block title %}Все заметки{% endblock %}
{% block header %}Все заметки в системе{% endblock %}

{% block content %}
    <div class="nav-buttons">
        <a href="{{ url_for('index') }}">
            <button class="btn" type="button">На главную</button>
        </a>
        <a href="{{ url_for('clear_session') }}">
            <button class="btn" type="button">Сменить пользователя</button>
        </a>
    </div>

    <div class="flex-container">
        <div class="flex-item">
            <h3>Мои заметки ({{ my_notes|length }})</h3>
            {% if my_notes %}
                {% for note in my_notes %}
                    <div class="note my-note">
                        <h4>{{ note.title }}</h4>
                        <p>{{ note.content }}</p>
                        <small class="small-text">Создано: {{ note.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
                        <div>
                            <a href="{{ url_for('edit_note', note_id=note.id) }}">
                                <button class="btn" type="button">Редактировать</button>
                            </a>
                            <form action="{{ url_for('delete_note', note_id=note.id) }}" method="POST" class="inline-form">
                                {{ form.hidden_tag() }}
                                <button class="btn" type="submit" onclick="return confirm('Вы уверены?')">Удалить</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p>У вас нет заметок</p>
            {% endif %}
        </div>

        <div class="flex-item">
            <h3>Заметки других пользователей ({{ other_notes|length }})</h3>
            {% if other_notes %}
                {% for note in other_notes %}
                    <div class="note other-note">
                        <h4>{{ note.title }}</h4>
                        <p>{{ note.content }}</p>
                        <small class="small-text">Создано: {{ note.created_at.strftime('%Y-%m-%d %H:%M') }}</small>
                        <small class="small-text disabled-text block-text">User ID: {{ note.user_id[:8] }}...</small>
                        <div>
                            <button class="btn" disabled>Редактировать</button>
                            <button class="btn" disabled>Удалить</button>
                            <small class="error">(недоступно)</small>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p>Нет заметок других пользователей</p>
            {% endif %}
        </div>
    </div>
{% endblock %}